= ğŸš€ En route vers les 256 clusters
:imagesdir: assets/default/images

== CrÃ©ation des connexions ğŸ§¨
image::code-cilium-cli.png[width=80%]

[NOTE.speaker]
====
ğŸ› ï¸ Outils de lâ€™agent :
* ğŸ§¬ Pulumi pour lâ€™Infra as Code
* ğŸ›¡ï¸ Provider custom : pulumi-cilium
* ğŸ§ª Le provider sâ€™appuie sur les bibliothÃ¨ques Go de la CLI Cilium
* âš¡ La CLI dÃ©clenche la connexion entre deux clusters
====

== Algorithme dâ€™interconnexion de 2 clusters

* ğŸ“¡ Extraction des donnÃ©es du cluster A
* ğŸ“¡ Extraction des donnÃ©es du cluster B
* ğŸ”§ Mise Ã  jour de la config sur A
* ğŸ”§ Mise Ã  jour de la config sur B


[NOTE.speaker]
====
* ğŸ“¡ Extraction des donnÃ©es de Cluster Mesh sur A
* ğŸ“¡ Extraction des donnÃ©es de Cluster Mesh sur B
* ğŸ”§ Mise Ã  jour de la config sur A
* ğŸ”§ Mise Ã  jour de la config sur B

ğŸ¤” "On peut parallÃ©liser les helm upgrade, non ?"

ğŸ’¥ RÃ©sultat : CPU en feu.

* GÃ©nÃ©raliser lâ€™algorithme pour N clusters.
====

== Algorithme gÃ©nÃ©ralisÃ© pour n clusters

* ğŸ“¡ Extraction des donnÃ©es (par cluster)
* ğŸ”§ Mise Ã  jour de la config (par cluster)

[NOTE.speaker]
====
ğŸ¯ Objectif : Connecter N clusters efficacement

En thÃ©orie : pour 511 clusters on metterait environ une heure
====

== La Pull Request

image::pr.png[]

== ğŸ§ª **32 clusters**

[cols="1,1", options="header"]
|===
| Ã‰tape | DurÃ©e

| ğŸ”§ *CrÃ©ation connexions*
| 5 minutes

| â³ *DÃ©ploiement total*
| 17 minutes

|===

[NOTE.speaker]
====
ğŸ¯ Mise en Å“uvre de lâ€™algorithme sÃ©quentiel sur une flotte de 32 clusters.
====

== AmÃ©lioration : parallÃ©lisation

ğŸ”§ Mise Ã  jour des clusters â€” parallÃ©lisÃ© âœ…

image::pr-2.png[]

[NOTE.speaker]
====
Avec 32 tÃ¢ches en parallÃ¨le on pourrait crÃ©er les connexions de 511 clusters en moins de 3 minutes
====

== ğŸ§ª **64 clusters**

[cols="1,1,1", options="header"]
|===
| Clusters | DÃ©ploiement total | Connexions

| 32 | 17 minutes | 5 minutes

| *64* | *15 minutes* | *2 minutes*

|===
